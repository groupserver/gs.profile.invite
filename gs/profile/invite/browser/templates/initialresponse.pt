<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  metal:use-macro="context/@@groupserver_site_home_layout/page">
  <head>
    <title metal:fill-slot="title">
      <tal:block replace="string:Respond to Your Invitation: ${view/groupInfo/name}: ${view/siteInfo/name}">
        Respond to Your Invitation
      </tal:block>
    </title>
  </head>
  <body>
    <div metal:fill-slot="utilitylinks">&#160;</div>
    <div metal:fill-slot="sitenavigation">&#160;</div>
    <div metal:fill-slot="search">&#160;</div>
    <div metal:fill-slot="messages" tal:condition="view/status" 
      class="message-error"
      tal:define="e view/errors"
      tal:attributes="class python:e and 'message-error' or 'message-result'">
      <p class="form-status" tal:content="structure view/status"/>
      <dl tal:condition="view/errors">
        <tal:block repeat="widget view/widgets">
          <tal:block tal:condition="widget/error">
            <dt tal:content="widget/label">Widget Name</dt>
            <dd class="error" 
              tal:content="structure widget/error">Error message</dd>
          </tal:block>
        </tal:block>
      </dl>
    </div>
    <div id="gs-profile-invite-initial-response" metal:fill-slot="body"
      tal:define="example python:view.invitationId == 'example';">
      <h1>Respond to Your Invitation
        <strong tal:condition="example">[Preview]</strong></h1>
      <div tal:condition="example" class="message-result">
        <p>
          This <strong>preview</strong> is similar to what the new
          member will see when he or she clicks on the invitation link.
          It is actually what you would see if you invited yourself to 
          <samp class="group"
            tal:content="view/groupInfo/name">this group</samp>.
          If you type in a <strong>password</strong> and 
          <strong>accept</strong> this preview invitation your password 
          will be unchanged, but you will see what the 
          <strong>group homepage</strong> looks like when someone accepts
          the invitation; if you <strong>decline</strong> this preview
          invitation you will see what the <em>Invitation Declined</em>
          page looks like.
        </p>
        <p>
          As the person extending the invitation, 
          some of your profile information is shown in the
          <strong>About 
            <span class="fn" tal:content="view/adminInfo/name">The 
              Admin</span></strong>
          section, below.
          This includes your profile photo and biography (if set).
        </p>
      </div><!--admin-preview-instructions-->
      <p id="greeting">
        <strong>Hi, <span class="fn" 
          tal:content="view/userInfo/name">new user</span>!</strong>
      </p><!--greeting-->
      <p id="reason">
        <span class="fn"
          tal:content="view/adminInfo/name">An administrator</span> 
        has invited you to join
        <strong class="group"
          tal:content="view/groupInfo/name">this group</strong>.
      </p><!--reason-->
      <form enctype="multipart/form-data"  method="post" action="."
        tal:attributes="action request/URL" id="respond">
        <fieldset id="accept">
          <legend>Accept</legend>
          <p>
            To <strong>accept</strong> the invitation, 
            <strong>choose</strong> a password, enter it
            below, then click
            <samp class="button"
              tal:content="view/actions/form.actions.accept/label">Big R</samp>
            button.
            <em>That's it!</em>
            After that you will get email messages when someone posts to
            <span class="group"
              tal:content="view/groupInfo/name">this group</span> and
            you will be able to post yourself.
          </p>
          <tal:block define="widgets python:[view.widgets['password1']]">
            <tal:block 
              replace="structure provider:groupserver.FormWidgets">
              Widgets and some such&#8230;
            </tal:block>
          </tal:block>
          <div id="tc" class="disclosureWidget">
            <p>
              <a class="disclosureButton" id="tc-button"
                href="javascript:showHideDisclosure('tc')">By joining
                <span class="group" 
                  tal:content="view/groupInfo/name">this group</span>
                you agree to the 
                <strong>acceptable use policy.</strong></a>
            </p>
            <div class="disclosureShowHide" style="display: none;">
              <div id="tc-content">Loading&#8230;</div>
            </div>
          </div>          
          <div class="buttons" tal:condition="view/availableActions">
            <tal:block define="action view/actions/form.actions.accept">
              <div class="formelementbutton">
                <span tal:replace="structure action/render">Button</span>
              </div>
            </tal:block>
          </div><!--buttons-->
        </fieldset><!--accept-->
        <fieldset id="decline">
          <legend>Decline</legend>
          <p>
            To <strong>decline</strong> the invitation click the 
            <samp class="button"
              tal:content="view/actions/form.actions.decline/label">Big R</samp>
            button.
            After that we will bother you no more.
          </p>
          <div class="buttons" tal:condition="view/availableActions">
            <tal:block define="action view/actions/form.actions.decline">
              <div class="formelementbutton">
                <span tal:replace="structure action/render">Button</span>
              </div>
            </tal:block>
          </div><!--buttons-->
        </fieldset><!--decline-->
        <tal:block replace="structure view/widgets/invitationId/hidden"/>
        <tal:block replace="structure view/widgets/groupId/hidden"/>
      </form>
      <div id="about" class="cols">
        <div id="about-the-group" class="rightColumn"
          tal:define="rlg python:view.groupInfo.get_property('real_life_group')">
          <h2>About 
            <span class="group" 
              tal:content="view/groupInfo/name">The Group</span></h2>
          <p id="about-the-group-text">
            <span id="group-purpose">
              <span class="group"
                tal:content="view/groupInfo/name">The group</span> 
              is an online group for
              <span id="real-life-group" tal:content="rlg">real
                people doing real things</span>.</span><!--group-purpose-->
            <tal:block define="groupId view/groupInfo/id"
              replace="structure provider:groupserver.GroupStats">
              The group stats.
            </tal:block>
          </p>
          <tal:block define="groupId view/groupInfo/id"
            replace="structure provider:groupserver.GroupPrivacy">
             The group privacy.
           </tal:block>
          <div id="privacy" class="disclosureWidget">
            <p>
              <a class="disclosureButton" id="privacy-button"
                href="javascript:showHideDisclosure('privacy')">Your 
                privacy is important, and will be maintained according 
                to the <strong>privacy policy</strong> of 
                <span class="site" tal:content="siteName">this site</span>.</a>
            </p>
            <div class="disclosureShowHide" style="display: none;">
              <div id="privacy-content">Loading&#8230;</div>
            </div>
          </div>
        </div><!--about-the-group-->
        <div id="about-the-admin" class="leftColumn">
          <div tal:define="user view/adminInfo/user"
            tal:replace="structure provider:groupserver.UserImage">
            A photo or some such&#8230;
          </div>
          <h2>About 
            <span class="fn" tal:content="view/adminInfo/name">The Admin</span></h2>
          <p>
            <span class="fn" 
              tal:content="view/adminInfo/name">The administrator</span> 
            is the administrator of
            <span class="group" 
              tal:content="view/groupInfo/name">the group</span>.
            The main role of an administrator is to manage the members of
            a group.
          </p>
          <div id="sec-bio" 
            tal:define="bio python:view.adminInfo.get_property('biography')"
            tal:condition="bio">
            <p>
              <strong>The biography</strong> of 
              <span class="fn"
              tal:content="view/adminInfo/name">the administrator</span> 
              is below. 
              (You can write your own biography once you accept the 
              invitation!)
            </p>
            <blockquote 
              tal:content="structure bio">
              Wow, I actually used a <code>blockquote</code> element!
            </blockquote>
          </div><!--sec-bio-->
        </div><!--about-the-admin-->
I;      </div><!--about-->
    </div><!--gs-profile-invite-initial-response-->
    <tal:block metal:fill-slot="javascript">
      <script type="text/javascript"
        src="/++resource++check_required-20071214.js">&#160;</script>
      <script type="text/javascript"
        src="/++resource++popup_help-20071218.js">&#160;</script>
      <script type="text/javascript">
        jQuery.noConflict()
        jQuery(document).ready( function () {
            jQuery("#privacy-button").click( function () {
                var uri = "/policies/privacy/ #privacy";
                jQuery("#privacy-content").load(uri);
            });
            jQuery("#tc-button").click( function () {
                var uri = "/policies/aup/ #aup";
                jQuery("#tc-content").load(uri);
            });
            GSPopupFormHelp.init('#respond');
            var gsRequiredWidgets = new Array('#form\\.password1');
            GSCheckRequired.init(
              gsRequiredWidgets, '#form\\.actions\\.accept');
            jQuery("#form\\.password1").focus();
        });
      </script>
    </tal:block>
  </body>
</html>

